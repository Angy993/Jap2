<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Quiz Romaji Multilang Full</title>
  <style>
    body { margin: 0; background: #f4f6f9; font-family: 'Helvetica Neue', sans-serif; }
    .layout { display: flex; max-width: 1300px; margin: 0 auto; padding: 40px; gap: 30px; }
    .container { flex: 1; background: #fff; border-radius: 12px; box-shadow: 0 0 12px rgba(0,0,0,0.05); padding: 30px; }
    .quiz-title { font-size: 28px; margin-bottom: 20px; text-align: center; color: #2a5d84; }
    .lang-select { text-align: center; margin-bottom: 15px; }
    .question { font-size: 22px; text-align: center; margin-bottom: 15px; }
    .input-group { text-align: center; }
    input { font-size: 20px; padding: 10px; width: 320px; border: 1px solid #ccc; border-radius: 6px; }
    button {
      font-size: 16px; padding: 10px 20px; margin-left: 10px;
      background: #2a5d84; color: white; border: none; border-radius: 6px;
      transition: transform 0.2s ease-out;
    }
    button:hover { transform: scale(1.05); }
    .result { font-size: 18px; margin-top: 30px; line-height: 1.6; }
    .explanation {
      background: #eef3f8; padding: 14px; margin-top: 15px;
      border-left: 4px solid #2a5d84; border-radius: 4px;
      animation: fadeIn 0.3s ease-out;
    }
    .sidebar { width: 280px; background: #fff; border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.04); padding: 25px; height: fit-content;
    }
    .sidebar h3 { margin-top: 0; font-size: 20px; color: #2a5d84; }
    .sidebar ul { list-style: none; padding-left: 0; }
    .sidebar li { margin-bottom: 10px; }
    .blur { filter: blur(5px); transition: filter 0.3s; cursor: pointer; }
    .blur:hover { filter: blur(0); }
    .highlight { animation: highlight 0.5s ease-out; }
    .version { position: fixed; top: 10px; right: 20px; font-size: 13px; color: #888; font-style: italic; }
    @keyframes fadeIn {
      from { opacity: 0; } to { opacity: 1; }
    }
    @keyframes highlight {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>
  <div class="version">Versione Multilang Full 2.1</div>
  <div class="layout">
    <div class="container">
      <div class="quiz-title">Quiz di Romaji Giapponese</div>
      <div class="lang-select">
        <label for="langSelect">Da:</label>
        <select id="langSelect">
          <option value="italiano">Italiano</option>
          <option value="english">English</option>
        </select>
      </div>
      <div id="question" class="question"></div>
      <div class="input-group">
        <input type="text" id="userInput" placeholder="Scrivi in romaji">
        <button onclick="checkAnswer()">Verifica</button>
      </div>
      <div class="result" id="result"></div>
      <div id="spiegazioni"></div>
    </div>
    <div class="sidebar">
      <h3>Parole Imparate</h3>
      <ul id="paroleSidebar"></ul>
    </div>
  </div>

  <script>
    // Dataset con emoji
    const data = [
      { "emoji":"🍚","italiano":"Mangiare","english":"To eat","romaji":"taberu", /* … */ },
      { "emoji":"🎬","italiano":"Guardare","english":"To watch","romaji":"miru", /* … */ },
      { "emoji":"🎧","italiano":"Ascoltare","english":"To listen","romaji":"kiku", /* … */ },
      { "emoji":"🥤","italiano":"Bere","english":"To drink","romaji":"nomu", /* … */ },
      /* aggiungi qui le altre 31 parole nello stesso formato */
    ];

    let index = 0;
    const sidebar = document.getElementById("paroleSidebar");
    const langSelect = document.getElementById("langSelect");

    function popolaSidebar() {
      sidebar.innerHTML = "";
      data.forEach(({ emoji, romaji, italiano }) => {
        const li = document.createElement("li");
        li.innerHTML = `${emoji} <span class="blur">${romaji}</span> – ${italiano}`;
        sidebar.appendChild(li);
      });
    }

    function loadQuestion() {
      const lang = langSelect.value;
      document.getElementById("userInput").value = "";
      document.getElementById("result").innerHTML = "";
      document.getElementById("spiegazioni").innerHTML = "";
      if (index < data.length) {
        const w = data[index];
        const word = lang==="italiano"? w.italiano : w.english;
        document.getElementById("question").innerHTML =
          `${w.emoji} <strong>Translate (${lang}→romaji):</strong> ${word}`;
      } else {
        document.getElementById("question").innerHTML = "Hai completato il quiz!";
        document.querySelector(".input-group").style.display = "none";
      }
    }

    function checkAnswer() {
      const lang = langSelect.value;
      const input = document.getElementById("userInput").value.trim().toLowerCase();
      const w = data[index];
      if (input === w.romaji) {
        // highlight emoji
        const q = document.getElementById("question");
        q.classList.add("highlight");
        setTimeout(()=> q.classList.remove("highlight"), 500);

        // mostra frase + traduzione
        document.getElementById("result").innerHTML =
          `<strong>${w.emoji} Frase:</strong><br>${w.frase}<br>` +
          `<em>${lang==="italiano"? w.traduzioneIt : w.traduzioneEn}</em>`;
        // spiegazioni …
        const key = lang==="italiano" ? "spiegazioniIt" : "spiegazioniEn";
        const spieg = w[key] || {};
        let html = "";
        for (let p in spieg) {
          const s = spieg[p];
          html += `<div class="explanation"><strong>${p}</strong><br>` +
                  `<em><strong>${lang==="italiano"?"Descrizione":"Description"}:</strong></em> ${s.descrizione}<br>` +
                  `<em><strong>${lang==="italiano"?"Uso":"Usage"}:</strong></em> ${s.uso}<br>` +
                  `<em><strong>${lang==="italiano"?"Esempio":"Example"}:</strong></em> ${s.esempio}<br>` +
                  `<em><strong>${lang==="italiano"?"Nota":"Note"}:</strong></em> ${s.nota}</div>`;
        }
        document.getElementById("spiegazioni").innerHTML = html;
      } else {
        document.getElementById("result").innerHTML =
          `<span style="color:red;">✗ ${lang==="italiano"? "Risposta sbagliata. Riprova." : "Wrong answer. Try again."}</span>`;
      }
    }

    langSelect.addEventListener("change", () => { index = 0; loadQuestion(); });
    document.getElementById("userInput").addEventListener("keydown", e => {
      if (e.key==="Enter") checkAnswer();
    });
    document.addEventListener("keydown", e => {
      if (e.key.toLowerCase()==="q" || e.key==="ArrowRight") {
        if (index < data.length-1) index++;
        loadQuestion();
      }
      if (e.key==="ArrowLeft" && index>0) {
        index--;
        loadQuestion();
      }
    });

    // init
    popolaSidebar();
    window.onload = loadQuestion;
  </script>
</body>
</html>
